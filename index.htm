<!DOCTYPE>
<html>
<head>
	<title>MTG</title>
	<link rel="stylesheet" href="kube.min.css">
	<link rel="stylesheet" href="mtg.css">
	
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.17/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.17/angular-route.min.js"></script>
	<script src="mtg.js"></script>
</head>
<body ng-app="mtg" ng-controller='main'>
	
	<div class="unit-rows">
		<div class="unit-50 unit-centered">
			<h1>Pro MTG Tourney {{date}}</h1>
			<hr>
		
			<div ng-show="!inited">
				<p>List the players who will be in this tournament.</p>
				<div class="table-container">					
					<table class="width-100">
						<tr ng-repeat="player in players">
							<td>{{$index+1}}</td>
							<td><input type="text" ng-model="player.name" class="width-100" placeholder="Name"></td>
						</tr>				
					</table> 
				</div>
				<hr>
				<button class="btn" ng-click="players.push({})">Add Player</button>
				<button class="btn btn-green" ng-click="init()">Done</button>
				
			</div>
			
			
			<div ng-show="inited">
				<h1>Current Scoreboard</h1>				
				<div class="table-container">
					 <table class="width-100">
						<thead>
							<tr>
								<th>#</th>
								<th>Name</th>
								<th>Won / Draw / Lost</th>
								<th>Played</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="player in players | orderBy:['-won','-draw']">
								<td>{{$index+1}}</td>
								<td>{{player.name}}</td>
								<td>{{player.won}} / {{player.draw}} / {{player.lost}}</td>
								<td>{{player.won + player.lost + player.draw}}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<p>Matches left: {{matchesLeft}}</p>
				
				<h1>Matches</h1>				
				<form class="forms width-100">
					<div ng-repeat="match in matches | orderBy:matchEvaluator" class="match units-row width-100" ng-class="match.status">
						<h4>#{{match.index+1}}</h4>							
						<div class="unit-centered unit-70 units-row end">
							<div class="unit-40">							
								<label>
									{{match.players[0].name}}
									<input type="text" ng-model="match.scores[0]" class="width-100"  required>
								</label> 							
							</div>
							
							<div class="unit-20 divider">
								-
							</div>

							<div class="unit-40">							
								<label>
									{{match.players[1].name}}
									<input type="text" ng-model="match.scores[1]" class="width-100" required>
								</label> 						
							</div>	
						</div>
						<div>
							<button class="btn" ng-show="match.status == 'queued'" ng-click="match.status = 'playing'; reorderMatches();">Start Match</button>
							<button class="btn" ng-show="match.status == 'playing'" ng-click="endMatch(match)">End Match</button>
						</div>				
					</div>
				</form>
				
				
			</div>
		
		</div>
	</div>
	
	
	
</body>
</html>
